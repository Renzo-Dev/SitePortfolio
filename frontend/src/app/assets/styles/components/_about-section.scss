@use '../variables' as *;

// ============================================
// Keyframes для анимаций
// ============================================

@keyframes fadeInUp {
	from {
		opacity: 0;
		transform: translateY(40px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes fadeInLeft {
	from {
		opacity: 0;
		transform: translateX(-60px);
	}
	to {
		opacity: 1;
		transform: translateX(0) translateY(0);
	}
}

@keyframes fadeInRight {
	from {
		opacity: 0;
		transform: translateX(60px);
	}
	to {
		opacity: 1;
		transform: translateX(0);
	}
}

@keyframes slideItem {
	from {
		opacity: 0;
		transform: translateX(-20px);
	}
	to {
		opacity: 1;
		transform: translateX(0);
	}
}

@keyframes marquee {
	0% {
		transform: translateX(0);
	}
	100% {
		transform: translateX(-50%);
	}
}

@keyframes glowPulse {
	0%,
	100% {
		opacity: 0.3;
		transform: scale(1);
	}
	50% {
		opacity: 0.6;
		transform: scale(1.05);
	}
}

// ============================================
// About Section Styles
// ============================================

.about {
	// Адаптивный padding для секции
	padding: clamp(40px, 8vw, 80px) 0;

	&__grid {
		display: grid;
		grid-template-columns: 40% 60%;
		gap: $spacing-3xl;
		align-items: center;

		@include tablet {
			grid-template-columns: 1fr;
			gap: $spacing-2xl;
		}
	}

	// ============================================
	// Image с 3D эффектом
	// ============================================
	&__image-wrapper {
		position: relative;
		border-radius: $radius-lg;
		aspect-ratio: 3/4;
		opacity: 0;
		transform: translateX(-60px);
		will-change: transform;
		transform-style: preserve-3d;
		perspective: 1000px;

		// Scroll reveal анимация
		&.is-visible {
			animation: fadeInLeft 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
			// После анимации сбрасываем transform для работы 3D эффекта
			animation-fill-mode: forwards;
		}

		&:hover {
			.about__image {
				filter: grayscale(0%);
			}
		}
	}

	&__image-container {
		position: relative;
		width: 100%;
		height: 100%;
		border-radius: $radius-lg;
		overflow: hidden;
		transform-style: preserve-3d;
		will-change: transform;
		// Базовый transform для 3D
		transform: perspective(1000px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1);
	}

	&__image {
		width: 100%;
		height: 100%;
		object-fit: cover;
		filter: grayscale(100%);
		transition: filter 0.6s cubic-bezier(0.16, 1, 0.3, 1),
			transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
	}

	// ============================================
	// Content с анимациями
	// ============================================
	&__content {
		display: flex;
		flex-direction: column;
		gap: $spacing-lg;
	}

	&__title {
		font-size: clamp(32px, 5vw, $text-h2);
		margin-bottom: $spacing-md;
		opacity: 0;
		transform: translateX(60px);
		line-height: 1.2;

		&.is-visible {
			animation: fadeInRight 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.1s forwards;
		}

		:deep(.icon) {
			vertical-align: middle;
			margin-right: $spacing-xs;
			transition: transform 0.3s ease;
		}

		&:hover :deep(.icon) {
			transform: rotate(360deg) scale(1.1);
		}
	}

	&__text {
		color: $text-secondary;
		font-size: clamp(15px, 2vw, 16px);
		line-height: $line-body;
		opacity: 0;
		transform: translateX(60px);

		&.is-visible {
			animation: fadeInRight 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.2s forwards;
		}

		strong {
			color: $text-primary;
			font-weight: 600;
			background: linear-gradient(135deg, #ffffff 0%, #a0a0a0 100%);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
		}
	}

	&__subtitle {
		font-size: clamp(20px, 3vw, $text-h4);
		margin-bottom: $spacing-lg;
		display: flex;
		align-items: center;
		gap: $spacing-xs;
		line-height: 1.3;

		:deep(.icon) {
			flex-shrink: 0;
		}
	}

	// ============================================
	// Сильные стороны с stagger анимацией
	// ============================================
	&__strengths {
		margin-top: $spacing-md;
		opacity: 0;
		transform: translateX(60px);

		&.is-visible {
			animation: fadeInRight 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.3s forwards;
		}
	}

	&__list {
		list-style: none;
		display: flex;
		flex-direction: column;
		gap: $spacing-md;
	}

	&__list-item {
		display: flex;
		align-items: center;
		gap: $spacing-sm;
		color: $text-secondary;
		font-size: clamp(14px, 2vw, 15px);
		padding: $spacing-sm $spacing-md;
		border-radius: $radius-md;
		background: rgba(255, 255, 255, 0.02);
		border: 1px solid rgba(255, 255, 255, 0.05);
		opacity: 0;
		transform: translateX(-20px);
		transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
		user-select: none;
		line-height: 1.6;

		// Stagger animation
		.about__strengths.is-visible & {
			animation: slideItem 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
			animation-delay: calc(var(--item-index) * 0.1s + 0.4s);
		}

		&:hover {
			color: $text-primary;
			background: rgba(255, 255, 255, 0.05);
			border-color: rgba(255, 255, 255, 0.15);
			transform: translateX(8px) scale(1.02);
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);

			:deep(svg) {
				transform: rotate(5deg) scale(1.2);
			}
		}

		:deep(svg) {
			color: $accent;
			transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
			flex-shrink: 0;
		}
	}

	// ============================================
	// Технологии - grid с переносом
	// ============================================
	&__tech {
		margin-top: $spacing-md;
		opacity: 0;
		transform: translateX(60px);

		&.is-visible {
			animation: fadeInRight 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.5s forwards;

			.about__tech-grid :deep(.badge) {
				animation: fadeInUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
				animation-delay: calc(var(--badge-index, 0) * 0.05s + 0.6s);
			}
		}
	}

	&__tech-grid {
		display: flex;
		flex-wrap: wrap;
		gap: $spacing-sm;
		margin-top: $spacing-sm;

		:deep(.badge) {
			opacity: 0;
			transform: translateY(10px);
			user-select: none;

			@for $i from 0 through 20 {
				&:nth-child(#{$i + 1}) {
					--badge-index: #{$i};
				}
			}
		}
	}
}

// ============================================
// Адаптивность - Modern UX 2025
// ============================================

// Large Tablet / iPad Pro (до 1200px)
@media (max-width: 1200px) {
	.about {
		&__grid {
			grid-template-columns: 45% 55%;
			gap: $spacing-2xl;
		}

		&__title {
			font-size: clamp(28px, 4vw, 36px);
		}

		&__text {
			font-size: clamp(15px, 2vw, 17px);
		}
	}
}

// Tablet (до 1024px)
@media (max-width: 1024px) {
	.about {
		&__grid {
			grid-template-columns: 1fr;
			gap: $spacing-2xl;
		}

		&__image-wrapper {
			max-width: 450px;
			margin: 0 auto;
			aspect-ratio: 3/4;
		}

		&__content {
			gap: $spacing-lg;
		}

		&__title {
			font-size: clamp(26px, 5vw, 32px);
			text-align: center;
		}

		&__text {
			text-align: center;
			font-size: clamp(15px, 2.5vw, 16px);
			max-width: 600px;
			margin: 0 auto;
		}

		&__subtitle {
			justify-content: center;
			text-align: center;
			font-size: clamp(18px, 3vw, 22px);
		}

		&__list-item {
			font-size: clamp(14px, 2vw, 15px);
		}
	}
}

// Mobile (до 768px)
@media (max-width: 768px) {
	.about {
		&__grid {
			display: flex;
			flex-direction: column;
			gap: $spacing-xl;
		}

		&__image-wrapper {
			max-width: min(340px, 90vw);
			aspect-ratio: 3/4;
			margin: 0 auto $spacing-lg;
			border-radius: $radius-md;

			// Убираем 3D эффект на мобильных - показываем цветное фото
			.about__image {
				filter: grayscale(0%);
			}

			// Отключаем hover эффекты
			&:hover {
				.about__image-container {
					transform: none;
				}
			}
		}

		&__content {
			gap: $spacing-md;
			padding: 0 $spacing-xs;
		}

		&__title {
			font-size: clamp(24px, 6vw, 28px);
			margin-bottom: $spacing-xs;
			text-align: center;

			:deep(.icon) {
				display: inline-block;
				vertical-align: middle;
			}
		}

		&__text {
			font-size: clamp(14px, 3.5vw, 15px);
			line-height: 1.7;
			text-align: center;
			max-width: 100%;
			padding: 0 $spacing-xs;
		}

		&__subtitle {
			font-size: clamp(17px, 4vw, 20px);
			margin-bottom: $spacing-sm;
			justify-content: center;

			:deep(.icon) {
				width: 22px;
				height: 22px;
			}
		}

		&__strengths {
			margin-top: $spacing-xs;
		}

		&__list {
			gap: $spacing-sm;
		}

		&__list-item {
			padding: $spacing-sm;
			font-size: clamp(13px, 3vw, 14px);
			border-radius: $radius-sm;
			gap: $spacing-xs;

			// Убираем hover transform на мобильных
			&:hover {
				transform: scale(1.02);
			}

			:deep(svg) {
				width: 20px;
				height: 20px;
				flex-shrink: 0;
			}

			span {
				line-height: 1.5;
			}
		}

		&__tech {
			margin-top: $spacing-xs;
		}

		&__tech-grid {
			gap: $spacing-xs;
			justify-content: center;

			:deep(.badge) {
				font-size: clamp(12px, 3vw, 13px);
				padding: 6px 12px;
			}
		}
	}
}

// Small Mobile (до 480px) - iPhone SE, малые устройства
@media (max-width: 480px) {
	.about {
		&__grid {
			gap: $spacing-lg;
		}

		&__image-wrapper {
			max-width: min(300px, 85vw);
			margin-bottom: $spacing-md;
			border-radius: $radius-sm;
		}

		&__content {
			padding: 0;
		}

		&__title {
			font-size: clamp(22px, 5.5vw, 26px);
			margin-bottom: 0;
			margin-top: 0;

			:deep(.icon) {
				width: 26px;
				height: 26px;
			}
		}

		&__text {
			font-size: clamp(13px, 3.2vw, 14px);
			line-height: 1.65;
			padding: 0;
		}

		&__subtitle {
			font-size: clamp(16px, 4vw, 18px);
			margin-bottom: $spacing-xs;

			:deep(.icon) {
				width: 20px;
				height: 20px;
			}
		}

		&__strengths,
		&__tech {
			margin-top: 0;
		}

		&__list {
			gap: 10px;
		}

		&__list-item {
			padding: 10px 12px;
			font-size: clamp(12px, 3vw, 13px);
			gap: 10px;

			:deep(svg) {
				width: 18px;
				height: 18px;
			}
		}

		&__tech-grid {
			gap: 8px;

			:deep(.badge) {
				font-size: clamp(11px, 2.8vw, 12px);
				padding: 5px 10px;
			}
		}
	}
}

// Extra Small Mobile (до 375px) - iPhone SE (1st gen), малые экраны
@media (max-width: 375px) {
	.about {
		&__image-wrapper {
			max-width: min(280px, 90vw);
		}

		&__title {
			font-size: 20px;

			:deep(.icon) {
				width: 24px;
				height: 24px;
			}
		}

		&__text {
			font-size: 13px;
		}

		&__subtitle {
			font-size: 16px;

			:deep(.icon) {
				width: 18px;
				height: 18px;
			}
		}

		&__list-item {
			padding: 8px 10px;
			font-size: 12px;

			:deep(svg) {
				width: 16px;
				height: 16px;
			}
		}

		&__tech-grid {
			gap: 6px;

			:deep(.badge) {
				font-size: 11px;
				padding: 4px 8px;
			}
		}
	}
}

// Large Desktop (от 1440px) - 2K экраны
@media (min-width: 1440px) {
	.about {
		&__grid {
			gap: $spacing-4xl;
			max-width: 1400px;
			margin: 0 auto;
		}

		&__title {
			font-size: clamp(36px, 3vw, 48px);
		}

		&__text {
			font-size: clamp(17px, 1.2vw, 19px);
			line-height: 1.8;
		}

		&__subtitle {
			font-size: clamp(20px, 1.5vw, 24px);
		}

		&__list-item {
			padding: $spacing-md $spacing-lg;
			font-size: clamp(15px, 1.1vw, 17px);

			:deep(svg) {
				width: 24px;
				height: 24px;
			}
		}

		&__tech-grid {
			:deep(.badge) {
				font-size: clamp(13px, 1vw, 15px);
				padding: 8px 16px;
			}
		}
	}
}

// Ultra Wide / 4K (от 1920px)
@media (min-width: 1920px) {
	.about {
		&__grid {
			max-width: 1600px;
			gap: 120px;
		}

		&__title {
			font-size: 52px;
		}

		&__text {
			font-size: 20px;
			line-height: 1.9;
		}

		&__list-item {
			padding: 18px 24px;
			font-size: 18px;
		}
	}
}

// ============================================
// Accessibility
// ============================================

@media (prefers-reduced-motion: reduce) {
	.about {
		&__image-wrapper,
		&__title,
		&__text,
		&__strengths,
		&__tech,
		&__list-item {
			animation: none !important;
			opacity: 1 !important;
			transform: none !important;
		}

		&__tech-grid :deep(.badge) {
			animation: none !important;
			opacity: 1 !important;
			transform: none !important;
		}
	}
}
