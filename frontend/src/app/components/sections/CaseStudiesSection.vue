<template>
	<section class="section" style="background-color: #f8fafc">
		<div class="container">
			<h2 class="section-title">–õ–∏—á–Ω—ã–µ –∫–µ–π—Å—ã</h2>
			<p class="section-subtitle">–†–µ–∞–ª—å–Ω—ã–π –æ–ø—ã—Ç —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º</p>

			<!-- –ö–µ–π—Å—ã -->
			<div class="cases">
				<BaseCard
					v-for="(caseItem, index) in cases"
					:key="caseItem.title"
					variant="elevated"
				>
					<div class="case">
						<!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
						<button class="case__header" @click="toggleCase(index)">
							<h3 class="case__title">{{ caseItem.title }}</h3>
							<Icon
								:name="
									expandedCases.includes(index)
										? 'heroicons:chevron-up'
										: 'heroicons:chevron-down'
								"
								class="case__icon"
							/>
						</button>

						<!-- –ö–æ–Ω—Ç–µ–Ω—Ç (expandable) -->
						<Transition name="case-content">
							<div v-if="expandedCases.includes(index)" class="case__content">
								<div class="case__section">
									<strong>–ü—Ä–æ–±–ª–µ–º–∞:</strong>
									<p>{{ caseItem.problem }}</p>
								</div>

								<div class="case__section">
									<strong>–†–µ—à–µ–Ω–∏–µ:</strong>
									<p>{{ caseItem.solution }}</p>
								</div>

								<div class="case__section">
									<strong>–†–µ–∑—É–ª—å—Ç–∞—Ç:</strong>
									<p>{{ caseItem.result }}</p>
								</div>

								<div class="case__section case__section--highlight">
									<strong>–í—ã–≤–æ–¥:</strong>
									<p>{{ caseItem.conclusion }}</p>
								</div>
							</div>
						</Transition>
					</div>
				</BaseCard>
			</div>
		</div>
	</section>
</template>

<script setup lang="ts">
// –ö–µ–π—Å—ã
const cases = [
	{
		title: '‚öôÔ∏è –ö–∞–∫ —è —É—Å–∫–æ—Ä–∏–ª API –≤ 3 —Ä–∞–∑–∞ —Å –ø–æ–º–æ—â—å—é –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Redis',
		problem: '–ú–µ–¥–ª–µ–Ω–Ω–∞—è –≤—ã–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö.',
		solution: '–í–Ω–µ–¥—Ä–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –∫–µ—à–∞ –∏ TTL –ø–æ –∫–ª—é—á–∞–º.',
		result: '–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ —Å–Ω–∏–∑–∏–ª–æ—Å—å —Å 900 –º—Å –¥–æ 280 –º—Å.',
		conclusion: '–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —á–∞—Å—Ç—å—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞.',
	},
	{
		title: 'üß© –ö–∞–∫ –ø–µ—Ä–µ–ø–∏—Å–∞–ª Vue 2 –ø—Ä–æ–µ–∫—Ç –Ω–∞ Vue 3 –±–µ–∑ –±–æ–ª–∏',
		problem: '–ü—Ä–æ–µ–∫—Ç –Ω–∞ —É—Å—Ç–∞—Ä–µ–≤—à–µ–º Vue 2 –∏ Options API.',
		solution: '–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ Composition API.',
		result: '–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ —É–ª—É—á—à–µ–Ω–Ω–∞—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.',
		conclusion: '–ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–æ—â–µ, –µ—Å–ª–∏ –Ω–∞—á–∏–Ω–∞—Ç—å —Å –∏–∑–æ–ª—è—Ü–∏–∏ –º–æ–¥—É–ª–µ–π.',
	},
	{
		title: 'üîÑ –û–ø—ã—Ç —Å Docker –∏ CI/CD',
		problem: '–†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π –∏ —á–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö.',
		solution: '–°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–π–ø–ª–∞–π–Ω–∞ GitLab ‚Üí Docker ‚Üí Nginx.',
		result: '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –∏ –º–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö.',
		conclusion: 'DevOps –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–∞—Å—Ç—å—é —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –∞ –Ω–µ –ø–æ—Å—Ç—Ñ–∞–∫—Ç—É–º.',
	},
]

// –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–∞—Å–∫—Ä—ã—Ç—ã—Ö –∫–µ–π—Å–æ–≤
const expandedCases = ref<number[]>([])

// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–µ–π—Å–∞
const toggleCase = (index: number) => {
	const caseIndex = expandedCases.value.indexOf(index)
	if (caseIndex > -1) {
		expandedCases.value.splice(caseIndex, 1)
	} else {
		expandedCases.value.push(index)
	}
}
</script>

<style lang="scss" scoped>
.cases {
	display: flex;
	flex-direction: column;
	gap: $space-6;
	max-width: 900px;
	margin: 0 auto;
}

.case {
	// –ó–∞–≥–æ–ª–æ–≤–æ–∫
	&__header {
		@include reset-button;
		display: flex;
		align-items: center;
		justify-content: space-between;
		gap: $space-4;
		width: 100%;
		text-align: left;
		@include transition(all);

		&:hover {
			color: $primary;
		}
	}

	&__title {
		font-size: $text-lg;
		font-weight: 600;
		color: inherit;
		margin: 0;

		@include respond-to('md') {
			font-size: $text-xl;
		}
	}

	&__icon {
		font-size: 24px;
		color: $primary;
		flex-shrink: 0;
		@include transition(transform);
	}

	// –ö–æ–Ω—Ç–µ–Ω—Ç
	&__content {
		margin-top: $space-6;
		padding-top: $space-6;
		border-top: 2px solid $light;
		display: flex;
		flex-direction: column;
		gap: $space-4;
	}

	&__section {
		strong {
			display: block;
			color: $primary;
			margin-bottom: $space-2;
			font-size: $text-base;
		}

		p {
			color: $dark;
			font-size: $text-base;
			line-height: 1.6;
			margin: 0;
		}

		&--highlight {
			background-color: rgba($secondary, 0.05);
			padding: $space-4;
			border-radius: $rounded-md;
			border-left: 4px solid $secondary;
		}
	}
}

// –ê–Ω–∏–º–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
.case-content-enter-active,
.case-content-leave-active {
	transition: all 0.3s ease;
}

.case-content-enter-from,
.case-content-leave-to {
	opacity: 0;
	transform: translateY(-10px);
}
</style>
